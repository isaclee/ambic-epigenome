#!/usr/bin/Rscript
# plot average curves
library(optparse)
library(tidyverse)
library(cluster)
library(DNAcopy)
library(parallel)

parseArgs = function(argsin){
    arglist=list(
        make_option(c("-o","--output"),type="character",default=NULL,
                    help="output pdf file path",metavar="/path/to/out"),
        make_option(c("-w","--window"),type="numeric",default=50000,
                    help="binning window - should match binned cov window")
    )
    argparser=OptionParser(option_list=arglist)
    args=parse_args(argparser,args=argsin,positional_arguments=c(1,100))
    ##Check if there are any variables, and if not, show help
    if (is.null(args$options$output)){
        print_help(argparser)
        print(args)
        stop("output must be provided",call.=FALSE)
    }
    args
}

output="/home/isac/Dropbox/Data/ambic/agingstudy/plots/day0_cnv.pdf"
datpaths=c("/dilithium/Data/Nanopore/projects/choSigmaAgingStudy/analysis/D0/sv/HostD0.counts.txt","/dilithium/Data/Nanopore/projects/choSigmaAgingStudy/analysis/D0/sv/UnstableGlutD0.counts.txt")
readcounts <- function(fpath){
    cnames=c("chrom","start","end","count","perbp")
    dat=read_tsv(fpath,col_names=cnames)
    dat
}


processCNV <- function(datpaths,output,binwin){
}

if (! interactive()){
    argsin=commandArgs(TRUE)
    args=parseArgs(argsin)
    print(args)
    processCNV(args$args,args$options$output,args$options$window)
}
